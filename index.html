<!DOCTYPE html>
<html >
<head>

    <!-- hexo-inject:begin --><!-- hexo-inject:end --><!--[if lt IE 9]>
        <style>body {display: none; background: none !important} </style>
        <meta http-equiv="Refresh" Content="0; url=//outdatedbrowser.com/" />
    <![endif]-->

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="format-detection" content="telephone=no" />
<meta name="author" content="morven" />


    
    


<meta property="og:type" content="website">
<meta property="og:title" content="Morvenyang2018">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Morvenyang2018">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Morvenyang2018">

<link rel="apple-touch-icon" href= "/apple-touch-icon.png">


    <link rel="alternate" href="/atom.xml" title="Morvenyang2018" type="application/atom+xml">



    <link rel="shortcut icon" href="/favicon.png">



    <link href="//cdn.bootcss.com/animate.css/3.5.1/animate.min.css" rel="stylesheet">



    <link href="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.css" rel="stylesheet">



    <script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script>
    <link href="//cdn.bootcss.com/pace/1.0.2/themes/blue/pace-theme-minimal.css" rel="stylesheet">


<link rel="stylesheet" href="/css/style.css">


    <style> .article { opacity: 0;} </style>


<link href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">


<title>Morvenyang2018</title>

<script src="//cdn.bootcss.com/jquery/2.2.4/jquery.min.js"></script>
<script src="//cdn.bootcss.com/clipboard.js/1.5.10/clipboard.min.js"></script>

<script>
    var yiliaConfig = {
        fancybox: true,
        animate: true,
        isHome: true,
        isPost: false,
        isArchive: false,
        isTag: false,
        isCategory: false,
        fancybox_js: "//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.js",
        scrollreveal: "//cdn.bootcss.com/scrollReveal.js/3.1.4/scrollreveal.min.js",
        search: 
    }
</script>


    <script> yiliaConfig.jquery_ui = [false]; </script>



    <script> yiliaConfig.rootUrl = "\/";</script><!-- hexo-inject:begin --><!-- hexo-inject:end -->






</head>
<body>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
    <header id="header" class="inner">
        <a href="/" class="profilepic">
            <img src="/img/avatar.png" class="animated zoomIn">
        </a>
        <hgroup>
          <h1 class="header-author"><a href="/">morven</a></h1>
        </hgroup>

        

        


        
            <div id="switch-btn" class="switch-btn">
                <div class="icon">
                    <div class="icon-ctn">
                        <div class="icon-wrap icon-house" data-idx="0">
                            <div class="birdhouse"></div>
                            <div class="birdhouse_holes"></div>
                        </div>
                        <div class="icon-wrap icon-ribbon hide" data-idx="1">
                            <div class="ribbon"></div>
                        </div>
                        
                        <div class="icon-wrap icon-link hide" data-idx="2">
                            <div class="loopback_l"></div>
                            <div class="loopback_r"></div>
                        </div>
                        
                        
                        <div class="icon-wrap icon-me hide" data-idx="3">
                            <div class="user"></div>
                            <div class="shoulder"></div>
                        </div>
                        
                    </div>
                    
                </div>
                <div class="tips-box hide">
                    <div class="tips-arrow"></div>
                    <ul class="tips-inner">
                        <li>菜单</li>
                        <li>标签</li>
                        
                        <li>友情链接</li>
                        
                        
                        <li>关于我</li>
                        
                    </ul>
                </div>
            </div>
        

        <div id="switch-area" class="switch-area">
            <div class="switch-wrap">
                <section class="switch-part switch-part1">
                    <nav class="header-menu">
                        <ul>
                        
                            <li><a href="/">主页</a></li>
                        
                            <li><a href="/archives/">所有文章</a></li>
                        
                            <li><a href="/tags/">标签云</a></li>
                        
                            <li><a href="/about/">关于我</a></li>
                        
                        </ul>
                    </nav>
                    <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa Email" href="mailto:123@123.com" title="Email"></a>
                            
                                <a class="fa GitHub" href="#" title="GitHub"></a>
                            
                                <a class="fa RSS" href="/atom.xml" title="RSS"></a>
                            
                        </ul>
                    </nav>
                </section>
                
                
                <section class="switch-part switch-part2">
                    <div class="widget tagcloud" id="js-tagcloud">
                        <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/C语言/">C语言</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Objective-C/">Objective-C</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TensorFlow/">TensorFlow</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/markDownd-数学公式/">markDownd 数学公式</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/区块链/">区块链</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/大数据/">大数据</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/数学/">数学</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/软件架构/">软件架构</a></li></ul>
                    </div>
                </section>
                
                
                
                <section class="switch-part switch-part3">
                    <div id="js-friends">
                    
                      <a class="main-nav-link switch-friends-link" href="https://hexo.io">Hexo</a>
                    
                      <a class="main-nav-link switch-friends-link" href="https://pages.github.com/">GitHub</a>
                    
                      <a class="main-nav-link switch-friends-link" href="http://moxfive.xyz/">MOxFIVE</a>
                    
                    </div>
                </section>
                

                
                
                <section class="switch-part switch-part4">
                
                    <div id="js-aboutme">专注于前端</div>
                </section>
                
            </div>
        </div>
    </header>                
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
      <div class="overlay">
          <div class="slider-trigger"></div>
          <h1 class="header-author js-mobile-header hide"><a href="/" title="回到主页">morven</a></h1>
      </div>
    <div class="intrude-less">
        <header id="header" class="inner">
            <a href="/" class="profilepic">
                <img src="/img/avatar.png" class="animated zoomIn">
            </a>
            <hgroup>
              <h1 class="header-author"><a href="/" title="回到主页">morven</a></h1>
            </hgroup>
            
            <nav class="header-menu">
                <ul>
                
                    <li><a href="/">主页</a></li>
                
                    <li><a href="/archives/">所有文章</a></li>
                
                    <li><a href="/tags/">标签云</a></li>
                
                    <li><a href="/about/">关于我</a></li>
                
                <div class="clearfix"></div>
                </ul>
            </nav>
            <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa Email" target="_blank" href="mailto:123@123.com" title="Email"></a>
                            
                                <a class="fa GitHub" target="_blank" href="#" title="GitHub"></a>
                            
                                <a class="fa RSS" target="_blank" href="/atom.xml" title="RSS"></a>
                            
                        </ul>
            </nav>
        </header>                
    </div>
    <link class="menu-list" tags="标签" friends="友情链接" about="关于我"/>
</nav>
      <div class="body-wrap">
  
    <article id="post-编写可读代码的艺术" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2018/10/04/编写可读代码的艺术/" class="article-date">
      <time datetime="2018-10-04T14:23:03.000Z" itemprop="datePublished">2018-10-04</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/10/04/编写可读代码的艺术/">编写可读代码的艺术</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h2 id="代码应当易于理解"><a href="#代码应当易于理解" class="headerlink" title="代码应当易于理解"></a>代码应当易于理解</h2><h3 id="是什么让代码变得“更好”"><a href="#是什么让代码变得“更好”" class="headerlink" title="是什么让代码变得“更好”"></a>是什么让代码变得“更好”</h3><p>大多数程序员依靠直觉和灵感来决定如何编程。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (Node *node = list -&gt; head; node != NULL; node = node -&gt; next)</span><br><span class="line">    Print(node -&gt; data);</span><br></pre></td></tr></table></figure>
<p>VS</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Node *node = list -&gt; head;</span><br><span class="line"><span class="keyword">if</span> (node == NULL) <span class="keyword">return</span>;</span><br><span class="line"><span class="keyword">while</span>(node -&gt; nex != NULL) &#123;</span><br><span class="line">    Print(node -&gt; data);</span><br><span class="line">    node = node -&gt; next;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (node != NULL) Print(node -&gt; data);</span><br></pre></td></tr></table></figure>
<h3 id="可读性基本定理"><a href="#可读性基本定理" class="headerlink" title="可读性基本定理"></a>可读性基本定理</h3><p>代码的写法应当使别人理解它所需要的时间最小化。</p>
<h3 id="总是越小越好吗"><a href="#总是越小越好吗" class="headerlink" title="总是越小越好吗"></a>总是越小越好吗</h3><p>一般来讲，你解决问题所用的代码越少就越好，但少的代码并不总是更好！<br>尽管减少代码行数是一个好目标，但把理解代码所需要的时间最小化是一个更好的目标。</p>
<h3 id="理解代码所需的时间是否与其他目标有冲突"><a href="#理解代码所需的时间是否与其他目标有冲突" class="headerlink" title="理解代码所需的时间是否与其他目标有冲突"></a>理解代码所需的时间是否与其他目标有冲突</h3><p>不冲突！就算是在需要高度优化代码的领域，还是有办法能让代码同时可读性更高。并且让你的代码容易理解往往会把它引向好的架构且容易测试。</p>
<h2 id="表面层次的改进"><a href="#表面层次的改进" class="headerlink" title="表面层次的改进"></a>表面层次的改进</h2><p>选择好的名字、写好的注释以及把代码整洁地写成更好的格式。</p>
<h3 id="把信息装到名字里"><a href="#把信息装到名字里" class="headerlink" title="把信息装到名字里"></a>把信息装到名字里</h3><p>选择一个好的名字可以让它承载很多信息。</p>
<h4 id="选择专业的词"><a href="#选择专业的词" class="headerlink" title="选择专业的词"></a>选择专业的词</h4><p>选择非常专业的词，并且避免使用“空洞”的词。</p>
<p>举例，“get”这个词就非常不专业，在下面的例子中：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">GetPage</span><span class="params">(url)</span>:</span> ...</span><br></pre></td></tr></table></figure></p>
<p>“get”这个词没有表达出很多信息。这个方法是从本地的缓存中得到一个页面，还是从数据库中，或者从互联网中？如果是从互联网中，更专业的名字可以是FetchPage()或者DownloadPage()。</p>
<p>下面是一个BinaryTree类的例子：<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BinaryTree</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">Size</span><span class="params">()</span></span>;</span><br><span class="line">    ...</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<p>你期望Size()方法返回什么呢？树的高度，节点数，还是树在内存中所占的空间？<br>问题是Size()没有承载很多信息。更专业的词可以是Height()、NumNodes()或者MemoryBytes()。</p>
<h4 id="找到更有表现力的词"><a href="#找到更有表现力的词" class="headerlink" title="找到更有表现力的词"></a>找到更有表现力的词</h4><p>清晰和精确比装可爱好。</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>单词</th>
<th>更多选择</th>
</tr>
</thead>
<tbody>
<tr>
<td>send</td>
<td>deliver, dispatch, announce, distribute, route</td>
</tr>
<tr>
<td>find</td>
<td>search, extract, locate, recover</td>
</tr>
<tr>
<td>start</td>
<td>launch, create, begin, open</td>
</tr>
<tr>
<td>make</td>
<td>create, set up, build, generate, compose, add, new</td>
</tr>
</tbody>
</table>
</div>
<h4 id="避免像tmp和retval这样泛泛的名字"><a href="#避免像tmp和retval这样泛泛的名字" class="headerlink" title="避免像tmp和retval这样泛泛的名字"></a>避免像tmp和retval这样泛泛的名字</h4><blockquote>
<p>retval这个名字没有包含很多信息。用一个描述该变量的值的名字来代替它。<br>tmp这个名字只应用于短期存在且临时性为其主要存在因素的变量。</p>
</blockquote>
<h4 id="循环迭代器"><a href="#循环迭代器" class="headerlink" title="循环迭代器"></a>循环迭代器</h4><p>像i、j、iter和it等名字常用做索引和循环迭代器。尽管这些名字很空泛，但是大家都知道它们的意思是“我是一个迭代器”。<br>但有时会有比i、j、k更贴切的迭代器命名。</p>
<h4 id="对于空泛名字的裁定"><a href="#对于空泛名字的裁定" class="headerlink" title="对于空泛名字的裁定"></a>对于空泛名字的裁定</h4><p>在某些情况下空泛的名字也有用处，如果你要使用像tmp、it或者retval这样空泛的名字，那么你要有个好的理由。</p>
<h4 id="用具体的名字代替抽象的名字"><a href="#用具体的名字代替抽象的名字" class="headerlink" title="用具体的名字代替抽象的名字"></a>用具体的名字代替抽象的名字</h4><p>假设你有一个内部方法叫做ServerCanStart()，它检测服务是否可以监听某个给定的TCP/IP端口。然而ServerCanStart()有点抽象。CanListenOnPort()就更具体一些。这个名字直接地描述了这个方法要做什么事情。</p>
<h4 id="为名字附带更多信息"><a href="#为名字附带更多信息" class="headerlink" title="为名字附带更多信息"></a>为名字附带更多信息</h4><blockquote>
<p>带单位的值：如果你的变量是一个度量的话（如时间长度或者字节数），那么最好把名字带上它的单位。</p>
</blockquote>
<div class="table-container">
<table>
<thead>
<tr>
<th>函数参数</th>
<th>带单位的参数</th>
</tr>
</thead>
<tbody>
<tr>
<td>Start(int delay)</td>
<td>delay -&gt; delay_secs</td>
</tr>
<tr>
<td>CreateCache(int size)</td>
<td>size -&gt; size_mb</td>
</tr>
<tr>
<td>ThrottleDownload(float limit)</td>
<td>limit -&gt; max_kbps</td>
</tr>
<tr>
<td>Rotate(float angle)</td>
<td>angle -&gt; degrees_cw</td>
</tr>
</tbody>
</table>
</div>
<blockquote>
<p>附带其他重要属性</p>
</blockquote>
<div class="table-container">
<table>
<thead>
<tr>
<th>情形</th>
<th>变量名</th>
<th>更好的名字</th>
</tr>
</thead>
<tbody>
<tr>
<td>一个“纯文本”格式的密码，需要加密后才能进一步使用</td>
<td>password</td>
<td>plaintext_password</td>
</tr>
<tr>
<td>一条用户提供的注释，需要转译之后才能用于显示</td>
<td>comment</td>
<td>unescaped_comment</td>
</tr>
<tr>
<td>已转化为UTF-8格式的html字节</td>
<td>html</td>
<td>html_utf8</td>
</tr>
<tr>
<td>以“url方式编码”的输入数据</td>
<td>data</td>
<td>data_urlenc</td>
</tr>
</tbody>
</table>
</div>
<blockquote>
<p>标识变量的任何关键属性，如果需要的话以易读的方式把它加到名字里。</p>
</blockquote>
<h4 id="名字应该有多长"><a href="#名字应该有多长" class="headerlink" title="名字应该有多长"></a>名字应该有多长</h4><blockquote>
<p>在小的作用域里可以使用短的名字<br>输入长名字——不再是个问题：单词补全功能<br>首字母缩略词和缩写<br>丢掉没用的词：例如，ConverToString()就不如ToString()这个更短的名字，而且没有丢失任何有用的信息。</p>
</blockquote>
<h4 id="利用名字的格式来传递含义"><a href="#利用名字的格式来传递含义" class="headerlink" title="利用名字的格式来传递含义"></a>利用名字的格式来传递含义</h4><p>对不同的实体使用不同的格式就像语法高亮显示的形式一样，能帮助你更容易地阅读代码。</p>
<blockquote>
<p>使用CamelCase来表示类名<br>使用lower<em>separated来表示变量名<br>常量的格式是kConstantName而不是CONST_NAME<br>类成员变量和普通变量一样，但必须以一条下划线结尾，如offset</em></p>
</blockquote>
<h4 id="其他格式规范"><a href="#其他格式规范" class="headerlink" title="其他格式规范"></a>其他格式规范</h4><blockquote>
<p>构造函数应该首字母大写而普通函数首字母小写<br>当调用jQuery库函数时，一条非常有用的规范是，给jQuery返回的结果也加上$作为前缀<br>当给一个HTML标记加id或者class属性时，下划线和连字符都是合法的值。一个可能的规范是用下划线来分开ID中的单词，用连字符来分开class中的单词</p>
</blockquote>
<h3 id="不会误解的名字"><a href="#不会误解的名字" class="headerlink" title="不会误解的名字"></a>不会误解的名字</h3><blockquote>
<p>要多问自己几遍：“这个名字会被别人解读成其他的含义吗？”要仔细审视这个名字。</p>
</blockquote>
<h4 id="推荐用min和max来表示（包含）极限"><a href="#推荐用min和max来表示（包含）极限" class="headerlink" title="推荐用min和max来表示（包含）极限"></a>推荐用min和max来表示（包含）极限</h4><p>命名极限最清楚的方式是在要限制的东西前加上max<em>或者min</em>。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">MAX_ITEMS_IN_CART = <span class="number">10</span></span><br><span class="line"><span class="keyword">if</span> shopping_cart.num_items() &gt; MAX_ITEMS_IN_CART:</span><br><span class="line">    Error(<span class="string">"Too many items in cart."</span>)</span><br></pre></td></tr></table></figure>
<h4 id="推荐用first和last来表示包含的范围"><a href="#推荐用first和last来表示包含的范围" class="headerlink" title="推荐用first和last来表示包含的范围"></a>推荐用first和last来表示包含的范围</h4><div align="center">
    <img src="/2018/10/04/编写可读代码的艺术/QQ20181006-093536@2x.png" width="400">
</div>

<h4 id="推荐使用begin和end来表示包含-排除范围"><a href="#推荐使用begin和end来表示包含-排除范围" class="headerlink" title="推荐使用begin和end来表示包含/排除范围"></a>推荐使用begin和end来表示包含/排除范围</h4><div align="center">
    <img src="/2018/10/04/编写可读代码的艺术/QQ20181006-093633@2x.png" width="400">
</div>

<h4 id="给布尔值命名"><a href="#给布尔值命名" class="headerlink" title="给布尔值命名"></a>给布尔值命名</h4><blockquote>
<p>当为布尔变量或者返回布尔值的函数选择名字时，要确保返回true和false的意义很明确。<br>通常来讲，加上像is、has、can或should这样的词，可以把布尔值变得更明确。<br>最好避免使用反义名字。例如，不要用：<code>bool disable_ssl = false;</code>，而更简单易读的表示方式是：<code>bool use_ssl = true;</code></p>
</blockquote>
<h4 id="与使用者的期望相匹配"><a href="#与使用者的期望相匹配" class="headerlink" title="与使用者的期望相匹配"></a>与使用者的期望相匹配</h4><p>有些名字之所以会让人误解是因为用户对它们的含义有先入为主的印象，就算你的本意并非如此。这种情况下，最好放弃这个名字而改用一个不会让人误解的名字。</p>
<blockquote>
<p>例子：get*()<br>例子：list::size()<br>例子：如何权衡多个备选名字</p>
</blockquote>
<h3 id="审美"><a href="#审美" class="headerlink" title="审美"></a>审美</h3><blockquote>
<p>好的源代码应当“看上去养眼”。</p>
</blockquote>
<ul>
<li>使用一致的布局，让读者很快就习惯这种风格。</li>
</ul>
<ul>
<li>让相似的代码看上去相似。</li>
</ul>
<ul>
<li>把相关的代码行分组，形成代码块。</li>
</ul>
<h4 id="为什么审美这么重要"><a href="#为什么审美这么重要" class="headerlink" title="为什么审美这么重要"></a>为什么审美这么重要</h4><p>使用从审美角度讲让人愉悦的代码更容易。<br>试想一下，你编程的大部分时间都花在看代码上！浏览代码的速度越快，人们就越容易使用它。</p>
<h4 id="重新安排换行来保持一致和紧凑"><a href="#重新安排换行来保持一致和紧凑" class="headerlink" title="重新安排换行来保持一致和紧凑"></a>重新安排换行来保持一致和紧凑</h4><h4 id="用方法来整理不规则的东西"><a href="#用方法来整理不规则的东西" class="headerlink" title="用方法来整理不规则的东西"></a>用方法来整理不规则的东西</h4><ul>
<li>消除了原来代码中大量的重复，让代码变得更紧凑；</li>
</ul>
<ul>
<li>每个测试用例重要的部分变得很直白；</li>
</ul>
<ul>
<li>添加新的测试更简单。</li>
</ul>
<h4 id="在需要时使用列对齐"><a href="#在需要时使用列对齐" class="headerlink" title="在需要时使用列对齐"></a>在需要时使用列对齐</h4><h4 id="选一个有意义的顺序，始终一致地使用它"><a href="#选一个有意义的顺序，始终一致地使用它" class="headerlink" title="选一个有意义的顺序，始终一致地使用它"></a>选一个有意义的顺序，始终一致地使用它</h4><ul>
<li>从“最重要”到“最不重要”排序；</li>
</ul>
<ul>
<li>按字母顺序排序。</li>
</ul>
<h4 id="把声明按块组织起来"><a href="#把声明按块组织起来" class="headerlink" title="把声明按块组织起来"></a>把声明按块组织起来</h4><h4 id="把代码分成“段落”"><a href="#把代码分成“段落”" class="headerlink" title="把代码分成“段落”"></a>把代码分成“段落”</h4><ul>
<li>它是一种把相似的想法放在一起并与其他想法分开的方法；</li>
</ul>
<ul>
<li>它提供了可见的“脚印”，如果没有它，会很容易找不到你读到哪里了；</li>
</ul>
<ul>
<li>它便于段落之间的导航。</li>
</ul>
<h4 id="个人风格与一致性"><a href="#个人风格与一致性" class="headerlink" title="个人风格与一致性"></a>个人风格与一致性</h4><p>一致的风格比“正确”的风格更重要。</p>
<h4 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h4><blockquote>
<p>如果多个代码块做相似的事情，尝试让它们有同样的剪影；<br>把代码按”列“对齐可以让代码更易浏览；<br>如果在一段代码中提到A、B和C，那么不要在另一段中说B、C和A。选择一个有意义的顺序，并始终用这样的顺序；<br>用空行来把大块代码分成逻辑上的“段落”。</p>
</blockquote>
<h3 id="该写什么样的注释"><a href="#该写什么样的注释" class="headerlink" title="该写什么样的注释"></a>该写什么样的注释</h3><p>注释的目的是尽量帮助读者了解得和作者一样多。</p>
<h4 id="什么不需要注释"><a href="#什么不需要注释" class="headerlink" title="什么不需要注释"></a>什么不需要注释</h4><blockquote>
<p>不要为那些从代码本身就能快速推断的事实写注释。</p>
<p>不要为了注释而注释</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Find the Node in the given subtree, with the given name, using the given depth.</span></span><br><span class="line">Node* FindNodeInSubtree(Node* subtree, string name, int depth);</span><br></pre></td></tr></table></figure>
<blockquote>
<p>不要给不好的名字加注释——应该把名字改好</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Enforce limits on the Reply as stated in the Request,</span></span><br><span class="line"><span class="comment">// such as the number of items returned, or total byte size, etc.</span></span><br><span class="line"><span class="keyword">void</span> CleanReply(Request request, Reply reply);</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Make sure 'reply' meets the count/byte/etc. limits from the 'request'</span></span><br><span class="line"><span class="keyword">void</span> EnforceLimitsFromRequest(Request request, Reply reply);</span><br></pre></td></tr></table></figure>
<p><strong>好代码 &gt; 坏代码 + 好注释</strong></p>
<h4 id="记录你的思想"><a href="#记录你的思想" class="headerlink" title="记录你的思想"></a>记录你的思想</h4><blockquote>
<p>加入“导演评论”<br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 这个类正在变得越来越乱</span></span><br><span class="line"><span class="comment">// 也许我们应该建立一个'ResourceNode'子类来帮助整理</span></span><br></pre></td></tr></table></figure></p>
<p>为代码中的暇疵写注释<br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// <span class="doctag">TODO:</span>采用更快算法</span></span><br><span class="line"><span class="comment">// TODO(dustin): 处理除JPEG以外的图像格式</span></span><br></pre></td></tr></table></figure></p>
</blockquote>
<div class="table-container">
<table>
<thead>
<tr>
<th>标记</th>
<th>通常的意义</th>
</tr>
</thead>
<tbody>
<tr>
<td>TODO：</td>
<td>我还没有处理的事情</td>
</tr>
<tr>
<td>FIXME：</td>
<td>已知的无法运行的代码</td>
</tr>
<tr>
<td>HACK：</td>
<td>对一个问题不得不采用的比较粗糙的解决方案</td>
</tr>
<tr>
<td>xxx：</td>
<td>危险！这里有重要的问题</td>
</tr>
</tbody>
</table>
</div>
<blockquote>
<p>给常量加注释</p>
</blockquote>
<h4 id="站在读者的角度"><a href="#站在读者的角度" class="headerlink" title="站在读者的角度"></a>站在读者的角度</h4><blockquote>
<p>意料之中的提问</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Recorder</span> &#123;</span></span><br><span class="line">    <span class="built_in">vector</span> &lt;<span class="keyword">float</span>&gt; data;</span><br><span class="line">    ...</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Clear</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="built_in">vector</span> &lt;<span class="keyword">float</span>&gt;().swap(data); <span class="comment">// Huh? Whiy not just data.clear()?</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Force vector to relinquish its memory (look up "STL swap trick")</span></span><br><span class="line"><span class="built_in">vector</span> &lt;<span class="keyword">float</span>&gt;().swap(data);</span><br></pre></td></tr></table></figure>
<blockquote>
<p>公布可能的陷阱</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 运行时间将达到 O(number_tags * average_tag_depth)，所以小心严重嵌套的输入。</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">FixBrokenHtml</span><span class="params">(html)</span>:</span></span><br><span class="line">    ...</span><br></pre></td></tr></table></figure>
<blockquote>
<p>“全局观”注释</p>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 这个文件包含一些辅助函数，为我们的文件系统提供了更便利的接口</span></span><br><span class="line"><span class="comment">// 它处理了文件权限及其他基本的细节。</span></span><br></pre></td></tr></table></figure>
<p>不要对于写庞大的正式文档这种想法不知所措。几句精心选择的话比什么都没有强。</p>
<blockquote>
<p>总结性注释</p>
</blockquote>
<p>可以做任何能帮助读者更容易理解代码的事。这可能也会包含对于“做什么”、“怎么做”或为什么“的注释。</p>
<h4 id="最后的思考——克服“作者心理阻滞”"><a href="#最后的思考——克服“作者心理阻滞”" class="headerlink" title="最后的思考——克服“作者心理阻滞”"></a>最后的思考——克服“作者心理阻滞”</h4><p>写注释可以分为几个简单的步骤：</p>
<ul>
<li>不管你心里想什么，先把它写下来。</li>
</ul>
<ul>
<li>读一下这段注释，看看有没有什么地方可以改进。</li>
</ul>
<ul>
<li>不断改进。</li>
</ul>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-常用算法学习" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2018/10/02/常用算法学习/" class="article-date">
      <time datetime="2018-10-02T02:41:36.000Z" itemprop="datePublished">2018-10-02</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/10/02/常用算法学习/">常用算法学习</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h2 id="算法是程序的灵魂"><a href="#算法是程序的灵魂" class="headerlink" title="算法是程序的灵魂"></a>算法是程序的灵魂</h2><blockquote>
<p>所谓算法(algorithm)就是定义良好的计算过程，它取一个或一组值作为输入，并产生出一个或一组值作为输出。<br>算法就是一系列的计算步骤，用来将输入数据转换成输出结果。<br>算法指的是一种解决问题的方法，也就是程序的“灵魂”。</p>
</blockquote>
<h3 id="开始学习算法"><a href="#开始学习算法" class="headerlink" title="开始学习算法"></a>开始学习算法</h3><h4 id="算法的特征和发展由来"><a href="#算法的特征和发展由来" class="headerlink" title="算法的特征和发展由来"></a>算法的特征和发展由来</h4><p>算法的特征：</p>
<ul>
<li>有穷性</li>
</ul>
<ul>
<li>确切性</li>
</ul>
<ul>
<li>输入</li>
</ul>
<ul>
<li>输出</li>
</ul>
<ul>
<li>可行性</li>
</ul>
<h4 id="何为算法"><a href="#何为算法" class="headerlink" title="何为算法"></a>何为算法</h4><p>算法是指在有限步骤内求解某一问题所使用的一组定义明确的规则。通俗点说，就是计算机解题过程中，无论是形成解题思路还是编写程序，都是实施某种算法。前者是推理实现的算法，后者是操作实现的算法。</p>
<h4 id="算法分析"><a href="#算法分析" class="headerlink" title="算法分析"></a>算法分析</h4><p>算法分析即指对一个算法所需要的资源进行预测。对于一个给定的问题，通过分析几种候选算法，可以很容易地从中选出一个最有效的算法。</p>
<h3 id="计算机中的算法"><a href="#计算机中的算法" class="headerlink" title="计算机中的算法"></a>计算机中的算法</h3><h4 id="计算机算法分类"><a href="#计算机算法分类" class="headerlink" title="计算机算法分类"></a>计算机算法分类</h4><ul>
<li>数值运算算法：求解数值；</li>
</ul>
<ul>
<li>非数值运算算法：事务管理领域。</li>
</ul>
<h4 id="表示算法的方法"><a href="#表示算法的方法" class="headerlink" title="表示算法的方法"></a>表示算法的方法</h4><ul>
<li>用流程图来表示算法</li>
</ul>
<ul>
<li>用N-S流程图来表示算法</li>
</ul>
<ul>
<li>用计算机语言表示算法</li>
</ul>
<h4 id="学好算法的秘诀"><a href="#学好算法的秘诀" class="headerlink" title="学好算法的秘诀"></a>学好算法的秘诀</h4><ul>
<li>学得要深入，基础要扎实</li>
</ul>
<ul>
<li>恒心、演练、举一反三</li>
</ul>
<ul>
<li>在语言之争的时代要学会坚持</li>
</ul>
<h2 id="分析妙趣横生的算法思想"><a href="#分析妙趣横生的算法思想" class="headerlink" title="分析妙趣横生的算法思想"></a>分析妙趣横生的算法思想</h2><h3 id="八大算法思想"><a href="#八大算法思想" class="headerlink" title="八大算法思想"></a>八大算法思想</h3><p>枚举、递推、递归、分治、贪心、试探法、动态迭代和模拟算法思想。</p>
<h4 id="比较“笨”的枚举算法思想"><a href="#比较“笨”的枚举算法思想" class="headerlink" title="比较“笨”的枚举算法思想"></a>比较“笨”的枚举算法思想</h4><ul>
<li>定义<br>在进行归纳推理时，如果逐个考察了某类事件的所有可能情况，因而得出一般结论，那么该结论是可靠的，这种归纳方法叫做枚举法。</li>
</ul>
<ul>
<li>思想<br>将问题的所有可能的答案一一列举，然后根据条件判断此答案是否合适，保留合适的，丢弃不合适的。</li>
</ul>
<ul>
<li>步骤<br>（1）题解的可能范围，不能遗漏任何一个真正解，也要避免有重复；<br>（2）判断是否是真正解的方法；<br>（3）使可能解的范围降至最小，以便提高解决问题的效率。</li>
</ul>
<div align="center">
    <img src="/2018/10/02/常用算法学习/QQ20181002-112904@2x.png" width="400">
    <center><font color="grey">枚举算法流程图</font></center>
</div>
      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-结构思考力" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2018/09/09/结构思考力/" class="article-date">
      <time datetime="2018-09-09T03:19:49.000Z" itemprop="datePublished">2018-09-09</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/09/09/结构思考力/">结构思考力</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h3 id="何为结构思考力？"><a href="#何为结构思考力？" class="headerlink" title="何为结构思考力？"></a>何为结构思考力？</h3><p>结构可以说是万物之本。大到宇宙星系，小到颗粒尘埃，无论是高楼大厦、动物与植物、机器与网络、思想与观念、人与社会，任何事物都有其特定的结构，这些事物也是通过其特定的结构来体现其存在的价值和意义。</p>
<p>结构存在于每个整体与局部关系的无穷变化中，每个局部表现整体，而局部的意义又由整体来决定。因此，当我们面临一个问题时，如果可以从结构的视角去审视和思考，一定可以让我们看得更全面、更清晰。</p>
<h4 id="Why——结构思考力的作用非凡"><a href="#Why——结构思考力的作用非凡" class="headerlink" title="Why——结构思考力的作用非凡"></a>Why——结构思考力的作用非凡</h4><p><strong>1.所有人都需要具备的核心技能</strong></p>
<div class="table-container">
<table>
<thead>
<tr>
<th>类别</th>
<th>具备结构思考力的特点</th>
<th>不具备结构思考力的特点</th>
</tr>
</thead>
<tbody>
<tr>
<td>解决问题</td>
<td>迅速抓住主要矛盾，忙而不乱应付任何问题</td>
<td>难以把握问题关键，经常遗漏关键要素</td>
</tr>
<tr>
<td>决策</td>
<td>能快速理出重点，果敢且科学做出决策</td>
<td>瞻前顾后，难以割舍，犹豫不决</td>
</tr>
<tr>
<td>写作</td>
<td>主题明确，结构严谨，层次清晰</td>
<td>找不到重点，大量文字和数字堆砌，结构混乱</td>
</tr>
<tr>
<td>表达、沟通</td>
<td>语言准确，思路清晰，能快速总结说话要点</td>
<td>很难把想要表达的思想在短时间内表达清楚</td>
</tr>
<tr>
<td>辅导</td>
<td>快速确定辅导目标，制定明确计划，理清核心</td>
<td>目标不明确，随机性较强，被辅导者难于理解</td>
</tr>
</tbody>
</table>
</div>
<ul>
<li>结构思考力是开展所有工作的基础</li>
</ul>
<ul>
<li>很多专业岗位对于结构思考力有更高的要求</li>
</ul>
<ul>
<li>所有管理者必备的管理技能</li>
</ul>
<div align="center">
    <img src="/2018/09/09/结构思考力/QQ20180909-204842@2x.png" width="400">
    <center><font color="grey">高效管理者的三大技能</font></center>
</div>


<ul>
<li>助力职业发展的重要保障</li>
</ul>
<p><strong>2.通过统一标准，提升整个组织的工作效率</strong></p>
<ul>
<li>结构思考力可以统一思考和表达的标准</li>
</ul>
<ul>
<li>结构思考力可以提升整个组织的管理效率</li>
</ul>
<p>汇报工作说结果，检讨工作说流程，请示工作说方案</p>
<ul>
<li>在中国企业里尤其需要结构思考力</li>
</ul>
<p>结构思考力是一种“先总后分”的思考与表达方式，强调先框架后细节，先总结后具体，先结论后原因，先重要后次要。</p>
<p><strong>3.对于全民素质的提升有着非凡的意义</strong></p>
<ul>
<li>传统教育缺乏对思考力的专门训练</li>
</ul>
<ul>
<li>结构思考力有助于提升国民素质</li>
</ul>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-软件架构" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2018/09/08/软件架构/" class="article-date">
      <time datetime="2018-09-08T03:13:01.000Z" itemprop="datePublished">2018-09-08</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/09/08/软件架构/">软件架构原理</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h3 id="软件架构的定义"><a href="#软件架构的定义" class="headerlink" title="软件架构的定义"></a>软件架构的定义</h3><p>架构是一个系统的基本组织结构，涵盖所包含的组件、组件之间的关系、组件与环境的关系，以及指导架构设计和演进的原则等内容。</p>
<h4 id="软件架构与设计"><a href="#软件架构与设计" class="headerlink" title="软件架构与设计"></a>软件架构与设计</h4><ul>
<li>架构关注如何对系统中的结构和交互进行较高级别的描述，它关注的是那些与系统骨架相关的决策问题，例如，功能、组织、技术、业务和质量属性等。</li>
</ul>
<ul>
<li>设计关注构成系统的部件或组件，以及子系统是如何组织的，这里关注的问题通常更接近所讨论的代码或模块自身，例如：将代码分成哪些模块？如何组织？给不同的功能分配哪些类？在运行时对象之间是如何交互的？传递什么消息？如何实施交互？等等。</li>
</ul>
<h4 id="软件架构相关的几个方面"><a href="#软件架构相关的几个方面" class="headerlink" title="软件架构相关的几个方面"></a>软件架构相关的几个方面</h4><ul>
<li>系统<br>系统是以特定方式组织的组件集合，以实现特定的功能。软件系统是其软件组件的集合。一个系统通常可以划分成若干个子系统。</li>
</ul>
<ul>
<li>结构<br>结构是根据某个指导规则或原则来组合或组织在一起的一组元素的集合。元素可以是软件或硬件系统。软件架构可以根据观察者的上下文展示各个层次的结构。</li>
</ul>
<ul>
<li>环境<br>软件系统所在的上下文或环境对其软件架构有直接的影响。这样的上下文因素可以是技术、商业、专业、操作等。</li>
</ul>
<ul>
<li>利益相关者<br>任何对某个系统及其成功与否感兴趣或关心的个体或团体，都是利益相关者。例如，架构师、开发团队、客户、项目经理和营销团队等。</li>
</ul>
<h3 id="软件架构的特征"><a href="#软件架构的特征" class="headerlink" title="软件架构的特征"></a>软件架构的特征</h3><h4 id="用架构来定义一种结构"><a href="#用架构来定义一种结构" class="headerlink" title="用架构来定义一种结构"></a>用架构来定义一种结构</h4><p>结构(structure)提供了一种深入理解架构的视角，也提供一种独特的视角来分析架构及其质量属性。</p>
<ul>
<li>运行时结构<br>在运行时创建的对象及其之间的交互方式经常决定部署架构(deployment archiecture)。</li>
</ul>
<ul>
<li>模块结构<br>为了分解任务，如何拆分代码并把代码组织到模块和包中，这与系统的可维护性和可修改性(可扩展性)密切相关。</li>
</ul>
<h4 id="由架构来挑选一组核心元素"><a href="#由架构来挑选一组核心元素" class="headerlink" title="由架构来挑选一组核心元素"></a>由架构来挑选一组核心元素</h4><p>一个定义良好的架构只会捕获那些构建系统核心功能所需的核心结构元素，这些核心结构元素一般会对系统有持久的影响，绝不是像流水账似地记录系统每个组件的所有细节。</p>
<h4 id="由架构来捕获早期的设计决策"><a href="#由架构来捕获早期的设计决策" class="headerlink" title="由架构来捕获早期的设计决策"></a>由架构来捕获早期的设计决策</h4><p>早期的设计决策需要在仔细分析需求之后才能做出，同时满足一些约束和限制条件。这些约束和限制条件包括组织的、技术的、人员的和时间的，等等。</p>
<h4 id="由架构来管理利益相关者的需求"><a href="#由架构来管理利益相关者的需求" class="headerlink" title="由架构来管理利益相关者的需求"></a>由架构来管理利益相关者的需求</h4><p>架构提供了利益相关者之间的一种通用的语言，使利益相关者能够通过这种约束性的表达来进行有效的沟通，并帮助架构师实现可最有效捕获这些需求和平衡点的架构。</p>
<h4 id="架构影响着组织结构"><a href="#架构影响着组织结构" class="headerlink" title="架构影响着组织结构"></a>架构影响着组织结构</h4><p>架构描述的系统结构通常可以直接映射到系统构建团队的结构。</p>
<h4 id="架构受到环境的影响"><a href="#架构受到环境的影响" class="headerlink" title="架构受到环境的影响"></a>架构受到环境的影响</h4><p>环境(environment)会对架构施加外部约束或限制，架构必须在这样的环境中发挥作用。</p>
<h4 id="架构是对系统的文档化"><a href="#架构是对系统的文档化" class="headerlink" title="架构是对系统的文档化"></a>架构是对系统的文档化</h4><p>架构文档化的最简单方法是为系统和组织架构的不同方面创建图表，包括组件架构、部署架构、通信架构以及团队或企业架构。</p>
<h4 id="架构通常会遵循某个模式"><a href="#架构通常会遵循某个模式" class="headerlink" title="架构通常会遵循某个模式"></a>架构通常会遵循某个模式</h4><p>大多数架构都遵循一定的风格，这些风格在实践中取得了很大的成功，它们被称为架构模式。</p>
<h3 id="软件架构的重要性"><a href="#软件架构的重要性" class="headerlink" title="软件架构的重要性"></a>软件架构的重要性</h3><div class="table-container">
<table>
<thead>
<tr>
<th>方面</th>
<th>见解/影响</th>
<th>例子</th>
</tr>
</thead>
<tbody>
<tr>
<td>根据架构来选择能对系统进行优化的质量属性</td>
<td>系统的可扩展性、可用性、可修改性、安全性等方面取决于在选择架构时的早期决策和权衡，经常会牺牲一个属性来提升另一个属性</td>
<td>必须使用分散式架构来开发针对可扩展性进行优化的系统，其中元素不紧密耦合，例如，微服务、代理</td>
</tr>
<tr>
<td>架构促进早期原型设计</td>
<td>定义架构以允许开发组织尝试构建早期原型，这位系统的行为提供了宝贵的洞察视角，而无需构建完整的系统</td>
<td>许多组织会构建服务的快速原型——通常只构建这些服务的外部API，而忽视其余的行为，这使得早期集成测试可以执行，也能更早发现架构中的交互问题</td>
</tr>
<tr>
<td>架构允许系统以组件化方式构建</td>
<td>具有明确定义的架构允许重用和组合现有的易于使用的组件来实现功能，而无需从头开始实现所有内容</td>
<td>为服务提供可立即使用的构建模块的库或框架技术</td>
</tr>
<tr>
<td>架构有助于管理系统变更</td>
<td>架构师会根据架构分离出在修改中受影响的组件和不受影响的组件，这有助于在实施新功能、性能修复等操作时对系统的变更保持最低程度</td>
<td>如果正确实现了架构，对于系统数据库读取的性能修改，只需对数据库和数据访问层进行修改即可，根本不需要触及应用程序的代码，这就是大多数现代Web框架的构建方式</td>
</tr>
</tbody>
</table>
</div>
<h3 id="系统架构与企业架构"><a href="#系统架构与企业架构" class="headerlink" title="系统架构与企业架构"></a>系统架构与企业架构</h3><p>企业架构师考虑一个组织或机构的整体业务和组织策略，并应用架构原理和实践来指导该组织或机构通过业务、信息、流程和技术变更需求执行策略。</p>
<ul>
<li>技术架构师<br>关注一个组织或机构使用的核心技术（硬件、软件、网络）。</li>
</ul>
<ul>
<li>安全架构师<br>创建或调整应用程序使用的安全策略，以适应团队的信息安全目标。</li>
</ul>
<ul>
<li>信息架构师<br>提出了架构解决方案，以使输入应用程序的信息或者从应用程序中获得的信息可用，从而促进团队的业务目标得以实现。</li>
</ul>
<ul>
<li>系统架构师<br>通常具有较高的技术关注度和较低的策略关注度。</li>
</ul>
<ul>
<li>解决方案架构师<br>通常跨越策略与技术关注点、组织与项目范围，处在中间位置。</li>
</ul>
<div align="center">
    <img src="/2018/09/08/软件架构/QQ20180909-083702@2x.png" width="400">
</div>


<h3 id="架构的质量属性"><a href="#架构的质量属性" class="headerlink" title="架构的质量属性"></a>架构的质量属性</h3><h4 id="可修改性"><a href="#可修改性" class="headerlink" title="可修改性"></a>可修改性</h4><h4 id="可测试性"><a href="#可测试性" class="headerlink" title="可测试性"></a>可测试性</h4><h4 id="可扩展性-性能"><a href="#可扩展性-性能" class="headerlink" title="可扩展性/性能"></a>可扩展性/性能</h4><h4 id="安全性"><a href="#安全性" class="headerlink" title="安全性"></a>安全性</h4><h4 id="可部署性"><a href="#可部署性" class="headerlink" title="可部署性"></a>可部署性</h4><blockquote>
<p>摘抄自《软件架构：Python语言实现》</p>
</blockquote>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/软件架构/">软件架构</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-大数据笔记" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2018/09/02/大数据笔记/" class="article-date">
      <time datetime="2018-09-02T02:56:49.000Z" itemprop="datePublished">2018-09-02</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/09/02/大数据笔记/">大数据笔记</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h2 id="《大数据架构商业之路——从业务需求到技术方案》"><a href="#《大数据架构商业之路——从业务需求到技术方案》" class="headerlink" title="《大数据架构商业之路——从业务需求到技术方案》"></a>《大数据架构商业之路——从业务需求到技术方案》</h2><h3 id="数据收集"><a href="#数据收集" class="headerlink" title="数据收集"></a>数据收集</h3><h4 id="1-互联网数据收集"><a href="#1-互联网数据收集" class="headerlink" title="1. 互联网数据收集"></a>1. 互联网数据收集</h4><ul>
<li>网络爬虫<br>主要的工作流程是从一个或若干个初始网页的地址URL开始，获得初始网页上的URL列表。然后在抓取网页的过程中，不断地从当前页面上抽取新的URL放入待爬行队列，直到满足系统的停止条件为止。</li>
</ul>
<p>如何有效地获取新的URL，对于爬虫执行成功与否非常关键，从这个角度可以将网页获取的策略分为几个大类：深度优先、宽度优先和最佳优先三种。</p>
<blockquote>
<p>PageRank算法：在随机访问的过程中，越是被频繁访问对链接越重要。</p>
<p>HITS算法：将每张网页节点的值分为两个，包括权威值(authority)和中心值(hub)。</p>
</blockquote>
<div align="center">
    <img src="/2018/09/02/大数据笔记/QQ20181005-150152@2x.png" width="400">
    <center><font color="grey">爬虫的基本架构和工作流程</font></center>
</div>

<p>对于创业公司而言，利用现有对外部资源是飞速发展的捷径。因此，网络爬虫将被广泛地运用在互联网世界的数据获取上。例如，对于O2O电商创业而言，可以让爬虫获取某些地区的气候数据，以便于之后做基于天气预报的个性化推荐和精准营销。此外，爬虫还可以从主流电商网站爬取其商品目录结构，以及最新的市场价格，等等。</p>
<h4 id="2-Apache-Nutch简介"><a href="#2-Apache-Nutch简介" class="headerlink" title="2. Apache Nutch简介"></a>2. Apache Nutch简介</h4><p>它是一个开源的、基于Java编程语言实现的搜索引擎，诞生于2002年8月。<br>在Nutch的进化过程中，还衍生了Hadoop、Tika、Gora和Crawler Commons四个重量级的Java开源项目。</p>
<p>Nutch不仅仅是一个爬虫系统，它还提供了运行搜索引擎所需的主要工具，包括全文索引和搜索。</p>
<p>主要组成部分为爬虫(Crawler)、索引器(Indexer)和查询器(Searcher)。</p>
<p>数据文件主要包括三类，分别是网络数据库(Web Database)、分段(Segment)和索引(Index)</p>
<h4 id="3-Heritrix简介"><a href="#3-Heritrix简介" class="headerlink" title="3. Heritrix简介"></a>3. Heritrix简介</h4><p>Heritrix也是一个开源的、使用Java编程语言开发的网络爬虫，始于2003年年初，最初用于对网上的资源进行归档，建立网络数字图书馆。</p>
<p>爬虫主要通过可视化的Web用户界面启动、监控和调整，允许弹性地定义要获取的网页链接，可扩展性良好，方便用户实现自己的抓取逻辑。</p>
<p>Heritrix主要有以下组件：</p>
<ul>
<li>爬取范围</li>
</ul>
<ul>
<li>边界开拓</li>
</ul>
<ul>
<li>处理器链</li>
</ul>
<ul>
<li>预取器</li>
</ul>
<ul>
<li>获取器</li>
</ul>
<ul>
<li>抽取器</li>
</ul>
<ul>
<li>写入器</li>
</ul>
<ul>
<li>后处理器</li>
</ul>
<ul>
<li>爬虫命令处理</li>
</ul>
<ul>
<li>服务器缓存(Servercache)</li>
</ul>
<h3 id="内部数据收集"><a href="#内部数据收集" class="headerlink" title="内部数据收集"></a>内部数据收集</h3><p>内部数据的收集主要分为推送(Push)和拉取(Pull)两大类。</p>
<div align="center">
    <img src="/2018/09/02/大数据笔记/QQ20181005-154121@2x.png" width="400">
    <center><font color="grey">推送的收集方式</font></center>
</div>

<div align="center">
    <img src="/2018/09/02/大数据笔记/QQ20181005-154306@2x.png" width="400">
    <center><font color="grey">拉取的收集方式</font></center>
</div>


<h4 id="1-Apache-Flume简介"><a href="#1-Apache-Flume简介" class="headerlink" title="1. Apache Flume简介"></a>1. Apache Flume简介</h4><p>Flume(<a href="http://flume.apache.org/)是一个分布式、可靠和高可用的海量数据收集系统。它同时采用推送和拉取两种采集模式，其能力受到了业界的认可与广泛应用。" target="_blank" rel="noopener">http://flume.apache.org/)是一个分布式、可靠和高可用的海量数据收集系统。它同时采用推送和拉取两种采集模式，其能力受到了业界的认可与广泛应用。</a></p>
<p>Flume的核心模块有三个：</p>
<blockquote>
<p>源头(Source)：负责接收数据的模块，它定义了数据的源头，从源头收集数据，传递给通道。</p>
<p>沉淀器(Sink)：批量地从通道读取并移除数据，并将所读取的内容存储到指定的位置。</p>
<p>通道(Channel)：作为一个管道或队列，连接源头和沉淀器。</p>
</blockquote>
<div align="center">
    <img src="/2018/09/02/大数据笔记/QQ20181005-155546@2x.png" width="400">
    <center><font color="grey">Flume工作的基本流程</font></center>
</div>



      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/大数据/">大数据</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-C语言笔记" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2018/09/02/C语言笔记/" class="article-date">
      <time datetime="2018-09-02T01:00:19.000Z" itemprop="datePublished">2018-09-02</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/09/02/C语言笔记/">C语言笔记</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h3 id="C语言基础知识"><a href="#C语言基础知识" class="headerlink" title="C语言基础知识"></a>C语言基础知识</h3><p>C程序必须有一个main函数，它是程序执行的起点。</p>
<p>函数的标量参数通过传值的方式进行传递，而数组名参数则具有传址调用的语义。</p>
<p>字符串是一串由NUL字节结尾的字符，并且有一组库函数以不同方式专门用于操作字符串。</p>
<p>printf函数执行格式化输出，scanf函数用于格式化输入，getchar和putchar分别执行非格式化字符的输入和输出。</p>
<p>if和while语句在C语言中的用途跟它们在其他语言中的用途差不多。</p>
<p>使用#include指令避免重复声明。</p>
<p>使用#define指令给常量值取名。</p>
<p>在#include文件中放置函数原型。</p>
<p>在使用下标前先检查它们的值。</p>
<p>在while或if表达式中蕴含赋值操作。</p>
<p>始终要进行检查，确保数组不越界。</p>
<p>一个C程序的源代码保存在一个或多个源文件中，但一个函数只能完整地出现在同一个源文件中。</p>
<p>把相关的函数放在用一个文件内是一种好策略。</p>
<p>每个源文件都分别编译，产生对应的目标文件。然后，目标文件被链接在一起，形成可执行文件。</p>
<p>编译和最终运行程序的机器有可能相同，也可能不同。</p>
<p>程序必须载入到内存中才能执行。在宿主式环境中，这个任务由操作系统完成。</p>
<p>在自由式环境中，程序常常永久存储于ROM中。</p>
<p>经过初始化的静态变量中程序执行前能获得它们的值。</p>
<p>绝大多数环境使用堆栈来存储局部变量和其他数据。</p>
<p>C编译器所使用的字符集必须包括某些特定的字符。如果你使用的字符集缺少某些字符，可以使用三字母词来代替。</p>
<p>转义序列使某些无法打印的字符得以表达，例如程序中包含某些空白字符。</p>
<p>注释以/<em>开始，以</em>/结束，它不允许嵌套。注释将被预处理器去除。</p>
<p>标识符由字母、数字和下划线组成，但不能以数字开头。在标识符中，大写字母和小写字母是不一样的。</p>
<p>关键字由系统保留，不能作为标识符使用。</p>
<p>良好的程序风格和文档将使程序更容易阅读和维护。</p>
<p>具有external链接属性的实体在其他语言的术语里称为全局(global)实体，所有源文件中的所有函数均可以访问它。</p>
<p>只要变量并非声明于代码块或函数定义内部，它在缺省情况下的链接属性即为external。</p>
<p>如果一个变量声明于代码块内部，在它前面添加extern关键字将使它所引用的是全局变量而非局部变量。</p>
<p>具有external链接属性的实体总是具有静态存储类型。</p>
<p>全局变量在程序开始执行前创建，并在程序整个执行过程中始终存在。</p>
<p>从属于函数的局部变量在函数开始执行时创建，在函数执行完毕后销毁，但用于执行函数的机器指令在程序的生命周期内一直存在。</p>
<p>局部变量由函数内部使用，不能被其他函数通过名字引用。它在缺省情况下的存储类型为自动，这是基于两个原因：其一，当这些变量需要时才为它们分配存储，这样可以减少内存的总需求量。其二，在堆栈上为它们分配存储可以有效地实现递归。</p>
<p>为了保持最佳的可移植性，把字符的值限制在有符号和无符号字符范围的交集之内，或者不要在字符上执行算术运算。</p>
<p>不要把整型值和枚举值混在一起使用。</p>
<p>不要依赖隐式声明。</p>
<p>在定义类型的新名字时，使用typedef而不是#define</p>
<p>用const声明其值不会修改的变量。</p>
<p>使用名字常量而不是字面值常量。</p>
<p>不要在嵌套的代码块之间使用相同的变量名。</p>
<p>除了实体的具体定义位置之外，在它的其他声明位置使用extern关键字。</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/C语言/">C语言</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-数学笔记" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2018/08/30/数学笔记/" class="article-date">
      <time datetime="2018-08-30T09:45:33.000Z" itemprop="datePublished">2018-08-30</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/08/30/数学笔记/">数学笔记</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h3 id="《解题-cdot-成长-cdot-快乐——陶哲轩教你学数学》"><a href="#《解题-cdot-成长-cdot-快乐——陶哲轩教你学数学》" class="headerlink" title="《解题$\cdot$成长$\cdot$快乐——陶哲轩教你学数学》"></a>《解题$\cdot$成长$\cdot$快乐——陶哲轩教你学数学》</h3><p>古希腊哲学家普罗克洛斯(Proclus)曾说过：“这，就是数学：她提醒你灵魂有不可见的形态；她赋予自己的发现以生命；她唤醒悟性，澄清思维；她照亮了我们内心的思想；她涤尽我们有生以来的矇昧与无知…..“。</p>
<blockquote>
<p>一个三角形的三条边的垂直平分线是共点。</p>
</blockquote>
<ul>
<li><blockquote>
<p>(自然约束) $\alpha,\beta, \gamma, t&gt;0和b&gt;d$。不失一般性地，我们还可以假设$d\geq0$.</p>
</blockquote>
</li>
<li></li>
</ul>
<blockquote>
<p>n总是和它的5次幂$n^5$具有相同的末位数。</p>
<p>n是9的倍数，当且仅当它的各位数字之和是9的倍数。</p>
<p>(Wilson定理)$(n-1)!+1$是n的倍数，当且仅当n是素数。</p>
<p>如果$k$是一个正奇数，那么$1^k+2^k+\cdots+n^k$可被n+1整除。</p>
</blockquote>
<p>正确解题的一般策略和想法：</p>
<ul>
<li>理解问题。</li>
</ul>
<ul>
<li>理解题目所要求的目标。</li>
</ul>
<ul>
<li>选择恰当的符号。</li>
</ul>
<ul>
<li>用选定的符号表达你所知道的信息，并画一个示意图。</li>
</ul>
<ul>
<li>对问题稍做修改。</li>
</ul>
<ul>
<li>对问题做较大修改。</li>
</ul>
<ul>
<li>证明与我们的问题相关的结果。</li>
</ul>
<ul>
<li>简化、充分利用题目所给的信息，实现战术目标。</li>
</ul>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/数学/">数学</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-动手学深度学习第一课：从上手到多类分类" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2018/08/25/动手学深度学习第一课：从上手到多类分类/" class="article-date">
      <time datetime="2018-08-25T02:59:50.000Z" itemprop="datePublished">2018-08-25</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/08/25/动手学深度学习第一课：从上手到多类分类/">《动手学深度学习》笔记</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <div align="center">
    <img src="/2018/08/25/动手学深度学习第一课：从上手到多类分类/QQ20180825-110220@2x.png" width="400">
</div>

<div align="center">
    <img src="/2018/08/25/动手学深度学习第一课：从上手到多类分类/QQ20180825-110358@2x.png" width="400">
</div>

<div align="center">
    <img src="/2018/08/25/动手学深度学习第一课：从上手到多类分类/QQ20180825-110504@2x.png" width="400">
</div>

<div align="center">
    <img src="/2018/08/25/动手学深度学习第一课：从上手到多类分类/QQ20180825-110543@2x.png" width="400">
</div>

<div align="center">
    <img src="/2018/08/25/动手学深度学习第一课：从上手到多类分类/QQ20180825-110629@2x.png" width="400">
</div>

<div align="center">
    <img src="/2018/08/25/动手学深度学习第一课：从上手到多类分类/QQ20180825-110656@2x.png" width="400">
</div>

<div align="center">
    <img src="/2018/08/25/动手学深度学习第一课：从上手到多类分类/QQ20180825-110716@2x.png" width="400">
</div>

<div align="center">
    <img src="/2018/08/25/动手学深度学习第一课：从上手到多类分类/QQ20180825-110817@2x@2x.png" width="400">
</div>

<div align="center">
    <img src="/2018/08/25/动手学深度学习第一课：从上手到多类分类/QQ20180825-110836@2x.png" width="400">
</div>

<div align="center">
    <img src="/2018/08/25/动手学深度学习第一课：从上手到多类分类/QQ20180825-110851@2x.png" width="400">
</div>

<div align="center">
    <img src="/2018/08/25/动手学深度学习第一课：从上手到多类分类/QQ20180825-110938@2x.png" width="400">
</div>

<div align="center">
    <img src="/2018/08/25/动手学深度学习第一课：从上手到多类分类/QQ20180825-111150@2x.png" width="400">
</div>

<div align="center">
    <img src="/2018/08/25/动手学深度学习第一课：从上手到多类分类/QQ20180825-111210@2x.png" width="400">
</div>

<div align="center">
    <img src="/2018/08/25/动手学深度学习第一课：从上手到多类分类/QQ20180825-111358@2x.png" width="400">
</div>

<div align="center">
    <img src="/2018/08/25/动手学深度学习第一课：从上手到多类分类/QQ20180825-112158@2x.png" width="400">
</div>

<div align="center">
    <img src="/2018/08/25/动手学深度学习第一课：从上手到多类分类/QQ20180825-112428@2x.png" width="400">
</div>

<p>近十年来深度学习长足发展的部分原因：</p>
<ul>
<li>优秀的容量控制方法</li>
</ul>
<ul>
<li>注意力机制解决了另一个困扰统计学超过一个世纪的问题：如何在不增加参数的情况下扩展一个系统的记忆容量和复杂度</li>
</ul>
<ul>
<li>例如记忆网络和神经编码器-解释器这样的多阶设计使得针对推理过程的迭代建模方法变得可能</li>
</ul>
<ul>
<li>另一个重大发展是对抗生成网络的发明</li>
</ul>
<ul>
<li>许多情况下单个GPU已经不能满足在大型数据集上训练的需要，分布式并行训练算法的能力已经有了极大的提升</li>
</ul>
<ul>
<li>并行计算的能力也为强化学习的发展贡献了力量</li>
</ul>
<ul>
<li>深度学习框架也在传播深度学习思想的过程中扮演了重要角色</li>
</ul>
<p>深度学习已经逐渐演变成一个工程师和科学家皆可使用的普适工具。</p>
<p>MXNet是一个开源的深度学习框架。它是AWS（亚马逊云计算服务）首选的深度学习框架，业被众多学校和公司使用。</p>
<p>动手学深度学习-网络课程：<a href="http://zh.gluon.ai/index.html" target="_blank" rel="noopener">http://zh.gluon.ai/index.html</a></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-TensorFlow" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2018/08/24/TensorFlow/" class="article-date">
      <time datetime="2018-08-24T11:17:15.000Z" itemprop="datePublished">2018-08-24</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/08/24/TensorFlow/">TensorFlow机器学习</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h2 id="TensorFlow基础"><a href="#TensorFlow基础" class="headerlink" title="TensorFlow基础"></a>TensorFlow基础</h2><p>Google公司不仅是大数据和云计算的领导者，在机器学习和深度学习领域也有很好的实践和积累，其内部使用的深度学习框架TensorFlow使深度学习爱好者的学习门槛越来越低。TensorFlow作为一个用于机器智能的开源软件库，是目前深度学习的主流框架之一，广泛应用于学术界与工业界。TensorFlow自开源至今，相继推出了分布式版本、服务器框架、可视化Tensorboard以及不胜枚举的模型在该框架下的实现。</p>
<h3 id="TensorFlow的特点"><a href="#TensorFlow的特点" class="headerlink" title="TensorFlow的特点"></a>TensorFlow的特点</h3><p>TensorFlow是Google基于DistBelief研发的第二代人工智能学习系统，其命名来源于自身的运行原理。TensorFlow是一个采用数据流图(Data Flow Graph)、用于数值计算的开源软件库。数据流图用节点(Node)和线(Edge)的有向图来描述数学计算。节点一般用来表示施加的数学操作，但也可以表示数据(Feed In)的起点/输出(Push Out)的终点，或者是读取/写入持久变量(Persistent Variable)的终点。线表示节点之间的输入/输出关系。这些数据线可以传输大小可动态调整的多维数据数组，即张量(Tensor)。</p>
<ul>
<li>高度的灵活性</li>
</ul>
<p>TensorFlow不是一个严格的神经网络库。只要用户可以将计算表示为一个数据流图，就可以使用TensorFlow来构建图，描写驱动计算的内部循环。</p>
<ul>
<li>真正的可移植性</li>
</ul>
<p>TensorFlow既可以在CPU和GPU上运行，又可以运行于台式机、服务器、笔记本电脑等。TensorFlow还可以将训练好的模型作为产品的一部分用于手机App。TensorFlow同样可以将模型作为云端服务运行在自己的服务器上，或者运行于Docker容器。</p>
<ul>
<li>科研与产品无缝对接</li>
</ul>
<p>Google科学家利用TensorFlow尝试新的算法，其产品团队则用TensorFlow来训练和使用计算模型，并直接提供给在线用户。</p>
<ul>
<li>自动求微分</li>
</ul>
<p>基于梯度的机器学习算法受益于TensorFlow自动求微分的能力。用户只需要定义预测模型的结构，将这个结构和目标函数(Objective Function)结合在一起并添加数据，TensorFlow将自动为用户计算相关的微分导数。</p>
<ul>
<li>多语言支持</li>
</ul>
<p>有一个合理的C++使用界面和一个易用的Python使用界面来构建和执行指定的“图”。还支持用户创造自己喜欢的语言界面，比如Go、Java、Lua、JavaScript或者是R语言。</p>
<ul>
<li>性能最优化</li>
</ul>
<p>由于TensorFlow对线程、队列、异步操作等给予最佳支持，使其计算潜能得以有效发挥。TensorFlow可以将硬件的计算潜能全部发挥出来，可充分利用CPU和多CPU。</p>
<h3 id="TensorFlow中的模型"><a href="#TensorFlow中的模型" class="headerlink" title="TensorFlow中的模型"></a>TensorFlow中的模型</h3><p>TensorFlow的三种主要模型：计算模型、数据模型和运行模型。</p>
<ul>
<li>计算模型</li>
</ul>
<p>计算图(Graph)是TensorFlow中一个最基本的概念，是TensorFlow的计算模型。TensorFlow中的所有计算都会被转化为计算图上的节点，可以把计算图看作一种有向图，TensorFlow中的每一个计算都是计算图上的一个节点，而节点之间的边描述了计算之间的依赖关系。</p>
<p>在TensorFlow程序中，系统会维护一个默认的计算图，通过tf.get_default_graph()函数可以获取当前默认的计算图，不同的计算图上的张量和运算不会共享。有效地整理TensorFlow中的资源同样也是计算图的重要功能之一。在一个计算图中，可以通过集合(Collection)来管理不同类别的计算资源，比如通过tf.add_to_collection函数可以将资源加入集合中，然后通过tf.get_collection获取集合中的资源。</p>
<ul>
<li>数据模型</li>
</ul>
<p>张量(Tensor)是TensorFlow中一个非常重要的概念，是TensorFlow的数据模型。在TensorFlow程序中，所有数据都可以通过张量的形式来表示。张量的最基本属性是纬度，其中零维张量表示为标量(Scalar)，一维张量表示为向量(Vector)，当维数超过2时，张量就可以理解为n维数组，但在TensorFLow中张量并不是以数的形式实现的，只是对TensorFlow中运算结果的引用。</p>
<p>一个张量中主要保存的是其名字(Name)、维度(Shape)和类型(Dtype)。张量名字作为张量的唯一标志符，描述了张量是如何计算出来的。张量纬度描述的是张量的纬度信息，比如纬度为零，则张量可以表示为标量。</p>
<ul>
<li>运行模型</li>
</ul>
<p>会话(Session)是拥有并管理TensorFlow程序运行时所有资源的概念，是TensorFlow的运行模型。当所有计算完成之后，需要关闭会话来帮助系统回收计算资源，否则就可能产生资源泄漏的问题。</p>
<h3 id="TensorFlow算法的一般流程"><a href="#TensorFlow算法的一般流程" class="headerlink" title="TensorFlow算法的一般流程"></a>TensorFlow算法的一般流程</h3><ul>
<li>导入/生成样本数据集</li>
</ul>
<ul>
<li>转换和归一化数据</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">data = tf.nn.batch_norm_with_global_normalization(...)</span><br></pre></td></tr></table></figure>
<ul>
<li>划分样本数据集为训练样本集、测试样本集和验证样本集</li>
</ul>
<ul>
<li>设置机器学习参数（超参数）</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">learning_rate = 0.01</span><br><span class="line">batch_size = 100</span><br><span class="line">iterations = 1000</span><br></pre></td></tr></table></figure>
<ul>
<li>初始化变量和占位符</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">a_var = tf.constant(42)</span><br><span class="line">x_input = tf.placeholder(tf.float32, [None, input_size])</span><br><span class="line">y_input = tf.placeholder(tf.float32, [None, num_classes])</span><br></pre></td></tr></table></figure>
<ul>
<li>定义模型结构</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">y_pred = tf.add(tf.mul(x_input, weight_matrix), b_matrix)</span><br></pre></td></tr></table></figure>
<ul>
<li>声明损失函数</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">loss = tf.reduce_mean(tf.square(y_actual - y_pred))</span><br></pre></td></tr></table></figure>
<ul>
<li>初始化模型和训练模型</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">with tf.Session(graph=graph) as session:</span><br><span class="line">    ...</span><br><span class="line">    session.run(...)</span><br><span class="line">    ...</span><br></pre></td></tr></table></figure>
<ul>
<li>评估机器学习模型</li>
</ul>
<ul>
<li>调优超参数</li>
</ul>
<ul>
<li>发布/预测结果</li>
</ul>
<h3 id="声明张量"><a href="#声明张量" class="headerlink" title="声明张量"></a>声明张量</h3><p>TensorFlow的主要数据结构是张量，它用张量来操作计算图。在TensorFlow里可以把变量或者占位符声明为张量。</p>
<ol>
<li><p>固定张量</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">row_dim = <span class="number">3</span></span><br><span class="line">col_dim = <span class="number">3</span></span><br><span class="line"><span class="comment"># 零张量</span></span><br><span class="line">zero_tsr = tf.zeros([row_dim, col_dim])</span><br><span class="line"><span class="comment"># 单位张量</span></span><br><span class="line">ones_tsr = tf.ones([row_dim, col_dim])</span><br><span class="line"><span class="comment"># 指定维度的常数填充的张量</span></span><br><span class="line">filled_tsr = tf.fill([row_dim, col_dim], <span class="number">42</span>)</span><br><span class="line"><span class="comment"># 用已知常数张量创建一个张量</span></span><br><span class="line">constant_tsr = tf.constant([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>])</span><br></pre></td></tr></table></figure>
</li>
<li><p>相似形状的张量</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">zero_similar = tf.zeros_like(constant_tsr)</span><br><span class="line">ones_similar = tf.ones_like(constant_tsr)</span><br></pre></td></tr></table></figure>
</li>
<li><p>序列张量</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">linear_tsr = tf.linspace(start=<span class="number">0.0</span>, stop=<span class="number">2.0</span>, num=<span class="number">5</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><p>随机张量</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">randunif_tsr = tf.random_uniform([row_dim, col_dim],</span><br><span class="line">                                minval=<span class="number">0</span>, maxval=<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">randnorm_tsr = tf.random_normal([row_dim, col_dim],</span><br><span class="line">                               mean=<span class="number">0.0</span>, stddev=<span class="number">1.0</span>)</span><br><span class="line"></span><br><span class="line">rumcnorm_tsr = tf.truncated_normal([row_dim, col_dim],</span><br><span class="line">                              mean=<span class="number">0.0</span>, stddev=<span class="number">1.0</span>)</span><br><span class="line"></span><br><span class="line">shuffled_output = tf.random_shuffle(input_tensor)</span><br><span class="line">cropped_output = tf.random_crop(input_tensor, crop_size)</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="使用占位符和变量"><a href="#使用占位符和变量" class="headerlink" title="使用占位符和变量"></a>使用占位符和变量</h3><p>使用TensorFlow计算图的关键工具是占位符和变量，变量是TensorFlow机器学习算法的参数，TensorFlow维护（调整）这些变量的状态来优化机器学习算法。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">sess = tf.Session()</span><br><span class="line">first_var = tf.Variable(tf.zeros([<span class="number">2</span>, <span class="number">3</span>]))</span><br><span class="line">sess.run(first_var.initializer)</span><br><span class="line">second_var = tf.Variable(tf.zeros_like(first_var))</span><br><span class="line"><span class="comment"># Depends on first_var</span></span><br><span class="line">sess.run(second_var.initializer)</span><br></pre></td></tr></table></figure>
<h3 id="操作（计算）矩阵"><a href="#操作（计算）矩阵" class="headerlink" title="操作（计算）矩阵"></a>操作（计算）矩阵</h3><ol>
<li><p>创建矩阵</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> tensorflow <span class="keyword">as</span> tf</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">sess = tf.Session()</span><br><span class="line">identity_matrix = tf.diag([<span class="number">1.0</span>, <span class="number">1.0</span>, <span class="number">1.0</span>])</span><br><span class="line">A = tf.truncated_normal([<span class="number">2</span>, <span class="number">3</span>])</span><br><span class="line">B = tf.fill([<span class="number">2</span>, <span class="number">3</span>], <span class="number">5.0</span>)</span><br><span class="line">C = tf.random_uniform([<span class="number">3</span>, <span class="number">2</span>])</span><br><span class="line">D = tf.convert_to_tensor(np.array([[<span class="number">1.</span>, <span class="number">2.</span>, <span class="number">3.</span>], [<span class="number">-3.</span>, <span class="number">-7.</span>, <span class="number">-1.</span>], [<span class="number">0.</span>, <span class="number">5.</span>, <span class="number">0</span><span class="number">-2.</span>]]))</span><br><span class="line">print(sess.run(identity_matrix))</span><br></pre></td></tr></table></figure>
</li>
<li><p>矩阵的加法和减法<br><code>print(sess.run(A+B))</code><br>[[3.2625878 4.7152586 3.7038145]<br>[4.4590096 5.09959   4.62294  ]]<br><code>print(sess.run(B-B))</code><br>[[0. 0. 0.]<br>[0. 0. 0.]]</p>
</li>
<li><p>矩阵乘法<br><code>print(sess.run(tf.matmul(B, identity_matrix)))</code><br>[[5. 5. 5.]<br>[5. 5. 5.]]</p>
</li>
<li><p>矩阵转置<br><code>print(sess.run(tf.transpose(C)))</code><br>[[0.3840685  0.07532799 0.54872775]<br>[0.4346856  0.8683685  0.05251133]]</p>
</li>
<li><p>逆矩阵<br><code>print(sess.run(tf.matrix_inverse(D)))</code><br>[[-0.5        -0.5        -0.5       ]<br>[ 0.15789474  0.05263158  0.21052632]<br>[ 0.39473684  0.13157895  0.02631579]]</p>
</li>
<li><p>矩阵分解<br><code>print(sess.run(tf.cholesky(identity_matrix)))</code><br>[[1. 0. 0.]<br>[0. 1. 0.]<br>[0. 0. 1.]]</p>
</li>
<li><p>矩阵的特征值和特征向量<br><code>print(sess.run(tf.self_adjoint_eig(D)))</code><br>(array([-10.65907521,  -0.22750691,   2.88658212]), array([[ 0.21749542,  0.63250104, -0.74339638],</p>
<pre><code>[ 0.84526515,  0.2587998 ,  0.46749277],
[-0.4880805 ,  0.73004459,  0.47834331]]))
</code></pre></li>
</ol>
<h3 id="实现激励函数"><a href="#实现激励函数" class="headerlink" title="实现激励函数"></a>实现激励函数</h3><p>激励函数是使用所有神经网络算法的必备“神器”。激励函数的目的是为了调节权重和误差。在TensorFlow中，激励函数是作用在张量上的非线性操作。</p>
<ol>
<li><p>整流线性单元(Rectifier linear unit, ReLU)是神经网络最常用的非线性函数。<br><code>print(sess.run(tf.nn.relu([-3., 3., 10.])))</code></p>
</li>
<li><p>ReLU6<br><code>print(sess.run(tf.nn.relu6([-3., 3., 10.])))</code></p>
</li>
<li><p>sigmoid函数是最常用的连续、平滑的激励函数。表达式：$\frac{1}{1+e^{-x}}$<br><code>print(sess.run(tf.nn.sigmoid([-1., 0., 1.])))</code></p>
</li>
<li><p>双曲正切函数(hyper tangent, tanh)，表达式：<script type="math/tex">\frac{e^x-e^{-x}}{e^x+e^{-x}}</script><br><code>print(sess.run(tf.nn.tanh([-1., 0., 1.])))</code></p>
</li>
<li><p>softsign函数，表达式： <script type="math/tex">\frac{x}{(abs(x)+1)}</script><br><code>print(sess.run(tf.nn.softsign([-1., 0., 1.])))</code></p>
</li>
<li><p>softplus激励函数是ReLU激励函数的平滑版，表达式为：$log(e^x+1)$<br><code>print(sess.run(tf.nn.softplus([-1., 0., 1.])))</code></p>
</li>
<li><p>ELU激励函数(Exponential Linear Unit, ELU)<br><code>print(sess.run(tf.nn.elu([-1., 0., 1.])))</code></p>
</li>
</ol>
<h3 id="读取数据源"><a href="#读取数据源" class="headerlink" title="读取数据源"></a>读取数据源</h3><ol>
<li><p>鸢尾花卉数据集(Iris data)</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn <span class="keyword">import</span> datasets</span><br><span class="line">iris = datasets.load_iris()</span><br><span class="line">print(len(iris.data))</span><br></pre></td></tr></table></figure>
</li>
<li><p>出生体重数据(Birth weight data)</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line">birthdata_url = <span class="string">'https://www.umass.edu/statdata/statdata/data/lowbwt.dat'</span></span><br><span class="line">birth_file = requests.get(birthdata_url)</span><br><span class="line">birth_data = birth_file.text.split(<span class="string">'\r\n'</span>)[<span class="number">5</span>:]</span><br><span class="line">birth_header = [x <span class="keyword">for</span> x <span class="keyword">in</span> birth_data[<span class="number">0</span>].split(<span class="string">''</span>) <span class="keyword">if</span> len(x)&gt;=<span class="number">1</span>]</span><br></pre></td></tr></table></figure>
</li>
<li><p>波士顿房价数据(Boston Housing data)</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line">housing_url = <span class="string">'https://archive.ics.uci.edu/ml/machine-learning-databases/housing/housing.data'</span></span><br><span class="line">housing_header = [<span class="string">'CRIM'</span>, <span class="string">'ZN'</span>, <span class="string">'INDUS'</span>, <span class="string">'CHAS'</span>, <span class="string">'NOX'</span>, <span class="string">'RM'</span>, </span><br><span class="line">                  <span class="string">'AGE'</span>, <span class="string">'DIS'</span>, <span class="string">'RAD'</span>, <span class="string">'TAX'</span>, <span class="string">'PTRATIO'</span>, <span class="string">'B'</span>,</span><br><span class="line">                 <span class="string">'LSTAT'</span>, <span class="string">'MEDV0'</span>]</span><br><span class="line">housing_file = requests.get(housing_url)</span><br><span class="line"></span><br><span class="line">housing_data = [[float(x) <span class="keyword">for</span> x <span class="keyword">in</span> y.split(<span class="string">' '</span>) <span class="keyword">if</span> len(x)&gt;=<span class="number">1</span>] <span class="keyword">for</span> y <span class="keyword">in</span> housing_file.text.split(<span class="string">'\n'</span>) <span class="keyword">if</span> len(y)&gt;=<span class="number">1</span>]</span><br><span class="line">print(len(housing_data))</span><br></pre></td></tr></table></figure>
</li>
<li><p>MNIST手写体字库</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> tensorflow.examples.tutorials.mnist <span class="keyword">import</span> input_data</span><br><span class="line">mnist = input_data.read_data_sets(<span class="string">"MNIST_data/"</span>, one_hot=<span class="keyword">True</span>)</span><br><span class="line">print(len(mnist.train.images))</span><br></pre></td></tr></table></figure>
</li>
<li><p>垃圾短信文本数据集</p>
</li>
</ol>
<h3 id="TensorFlow实现损失函数"><a href="#TensorFlow实现损失函数" class="headerlink" title="TensorFlow实现损失函数"></a>TensorFlow实现损失函数</h3><p>损失函数(loss function)对机器学习来讲是非常重要的。它们度量模型输出值与目标值(target)间的差值。</p>
<ol>
<li>L2正则损失函数（欧拉损失函数）<br>是预测值与目标值差值的平方和，在目标值附近有更好的曲度，机器学习利用这点收敛，并且离目标越近收敛越慢。</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">x_vals = tf.linspace(<span class="number">-1.</span>, <span class="number">1.</span>, <span class="number">500</span>)</span><br><span class="line">target = tf.constant(<span class="number">0.</span>)</span><br><span class="line"></span><br><span class="line">l2_y_vals = tf.square(target - x_vals)</span><br><span class="line">l2_y_out = sess.run(l2_y_vals)</span><br></pre></td></tr></table></figure>
<ol>
<li>L1正则损失函数（绝对值损失函数）<br>对差值求绝对值，在目标值附近不平滑，导致算法不能很好地收敛。</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">l1_y_vals = tf.abs(target - x_vals)</span><br><span class="line">l1_y_out = sess.run(l1_y_vals)</span><br></pre></td></tr></table></figure>
<ol>
<li><p>Pseudo-Huber损失函数<br>是Huber损失函数的连续、平滑估计，试图利用L1和L2正则削减极值处的陡峭，使得目标值附近连续。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">delta1 = tf.constant(<span class="number">0.25</span>)</span><br><span class="line">phuber1_y_vals = tf.multiply(tf.square(delta1), tf.sqrt(<span class="number">1.</span> + </span><br><span class="line">                             tf.square((target - x_vals) / delta1)) - <span class="number">1.</span>)</span><br><span class="line">phuber1_y_out = sess.run(phuber1_y_vals)</span><br><span class="line">delta2 = tf.constant(<span class="number">5.</span>)</span><br><span class="line">phuber2_y_vals = tf.multiply(tf.square(delta2), tf.sqrt(<span class="number">1.</span> +</span><br><span class="line">                             tf.square((target - x_vals) / delta2)) - <span class="number">1.</span>)</span><br><span class="line">phuber2_y_out = sess.run(phuber2_y_vals)</span><br></pre></td></tr></table></figure>
</li>
<li><p>分类损失函数<br>用来评估预测分类结果。</p>
</li>
<li><p>Hinge损失函数<br>主要用来评估支持向量机算法，有时也用来评估神经网络算法。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">x_vals = tf.linspace(<span class="number">-3.</span>, <span class="number">5.</span>, <span class="number">500</span>)</span><br><span class="line">target = tf.constant(<span class="number">1.</span>)</span><br><span class="line">targets = tf.fill([<span class="number">500</span>,], <span class="number">1.</span>)</span><br><span class="line"></span><br><span class="line">hinge_y_vals = tf.maximum(<span class="number">0.</span>, <span class="number">1.</span> - tf.multiply(target, x_vals))</span><br><span class="line">hinge_y_out = sess.run(hinge_y_vals)</span><br><span class="line">print(hinge_y_out)</span><br></pre></td></tr></table></figure>
</li>
<li><p>两类交叉熵损失函数(Cross-entropy loss)<br>有时也作为逻辑损失函数</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">xentropy_y_vals = - tf.multiply(target, tf.log(x_vals)) - tf.multiply((<span class="number">1.</span> - target), </span><br><span class="line">                                                                      tf.log(<span class="number">1.</span> - x_vals))</span><br><span class="line">xentropy_y_out = sess.run(xentropy_y_vals)</span><br></pre></td></tr></table></figure>
</li>
<li><p>Sigmoid交叉熵损失函数(Sigmoid cross entropy loss)<br>先把x_vals值通过sigmoid函数转换，再计算交叉熵损失。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">xentropy_sigmoid_y_vals = tf.nn.sigmoid_cross_entropy_with_logits(logits=x_vals, labels=targets)</span><br><span class="line">xentropy_sigmoid_y_out = sess.run(xentropy_sigmoid_y_vals)</span><br></pre></td></tr></table></figure>
</li>
<li><p>加权交叉熵损失函数(Weighted corss entropy loss)<br>Sigmoid交叉熵损失函数的加权，对正目标加权。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">weight = tf.constant(<span class="number">0.5</span>)</span><br><span class="line">xentropy_weighted_y_vals = tf.nn.weighted_cross_entropy_with_logits(logits=x_vals, </span><br><span class="line">                                                                    targets=targets, pos_weight=weight)</span><br><span class="line">xentropy_weighted_y_out = sess.run(xentropy_weighted_y_vals)</span><br></pre></td></tr></table></figure>
</li>
<li><p>Softmax交叉熵损失函数(Softmax corss-entropy loss)<br>作用于非归一化的输出结果，只针对单个目标分类的计算损失。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">unscaled_logits = tf.constant([[<span class="number">1.</span>, <span class="number">-3.</span>, <span class="number">10.</span>]])</span><br><span class="line">target_dist = tf.constant([[<span class="number">0.1</span>, <span class="number">0.02</span>, <span class="number">0.88</span>]])</span><br><span class="line">softmax_xentropy = tf.nn.softmax_cross_entropy_with_logits(logits=unscaled_logits, labels=target_dist)</span><br><span class="line">print(sess.run(softmax_xentropy))</span><br></pre></td></tr></table></figure>
</li>
<li><p>稀疏Softmax交叉熵损失函数(Sparse softmax cross-entropy loss)<br>把目标分类为true的转化成index，而Softmax交叉熵损失函数将目标转成概率分布。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sparse_target_dist = tf.constant([<span class="number">2</span>])</span><br><span class="line">sparse_xentropy = tf.nn.sparse_softmax_cross_entropy_with_logits(logits=unscaled_logits, labels=sparse_target_dist)</span><br><span class="line">print(sess.run(sparse_xentropy))</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>用matplotlib绘制回归算法的损失函数<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line">x_array = sess.run(x_vals)</span><br><span class="line">plt.plot(x_array, l2_y_out, <span class="string">'b-'</span>, label=<span class="string">'L2 Loss'</span>)</span><br><span class="line">plt.plot(x_array, l1_y_out, <span class="string">'r--'</span>, label=<span class="string">'L1 Loss'</span>)</span><br><span class="line">plt.plot(x_array, phuber1_y_out, <span class="string">'k-'</span>, label=<span class="string">'P-Huber Loss (0.25)'</span>)</span><br><span class="line">plt.plot(x_array, phuber2_y_out, <span class="string">'g:'</span>, label=<span class="string">'P-Huber Loss (5.0)'</span>)</span><br><span class="line">plt.ylim(<span class="number">-0.2</span>, <span class="number">0.4</span>)</span><br><span class="line">plt.legend(loc=<span class="string">'lower right'</span>, prop=&#123;<span class="string">'size'</span>: <span class="number">11</span>&#125;)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure></p>
<div align="center">
    <img src="/2018/08/24/TensorFlow/QQ20180830-165702@2x.png" width="400">
</div>

<p>用matplotlib绘制各种分类算法损失函数<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">x_array = sess.run(x_vals)</span><br><span class="line">plt.plot(x_array, hinge_y_out, <span class="string">'b-'</span>, label=<span class="string">'Hinge Loss'</span>)</span><br><span class="line">plt.plot(x_array, xentropy_y_out, <span class="string">'r--'</span>, label=<span class="string">'Cross Entropy Loss'</span>)</span><br><span class="line">plt.plot(x_array, xentropy_sigmoid_y_out, <span class="string">'k-.'</span>, label=<span class="string">'Cross Entropy Sigmoid Loss'</span>)</span><br><span class="line">plt.plot(x_array, xentropy_weighted_y_out, <span class="string">'g:'</span>, label=<span class="string">'Weighted Cross Entropy Loss(x0.5)'</span>)</span><br><span class="line">plt.ylim(<span class="number">-1.5</span>, <span class="number">3</span>)</span><br><span class="line">plt.legend(loc=<span class="string">'lower right'</span>, prop=&#123;<span class="string">'size'</span>: <span class="number">11</span>&#125;)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure></p>
<div align="center">
    <img src="/2018/08/24/TensorFlow/QQ20180830-172920@2x.png" width="400">
</div>
      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/TensorFlow/">TensorFlow</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-编写高质量Objective-C" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2018/08/19/编写高质量Objective-C/" class="article-date">
      <time datetime="2018-08-19T13:19:24.000Z" itemprop="datePublished">2018-08-19</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/08/19/编写高质量Objective-C/">《编写高质量Objective-C》笔记</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h4 id="建议1-视Objective-C为一门动态语言"><a href="#建议1-视Objective-C为一门动态语言" class="headerlink" title="建议1: 视Objective-C为一门动态语言"></a>建议1: 视Objective-C为一门动态语言</h4><p>美国人布莱德 $\cdot$ 确斯于1980年发明的一种程序设计语言，与C++一样，都是在C的基础上加入面向对象特性扩充而成的。</p>
<p><strong>开发语言的三个不同层次：</strong><br>(1) 传统的面向过程的语言开发；<br>(2) 改进的开发面向对象的语言；<br>(3) 动态开发语言。</p>
<ol>
<li>Objective-C是动态语言，C++是静态语言。</li>
<li>静态语言执行效率和安全性比动态语言高，但其简便性没有动态语言高。</li>
<li>运行时(Runtime)环境可处理弱类型、函数存在检查工作，会检测列表里是否存在对应的函数，类型是否正确，最后确定正确的函数地址，再进行保存寄存器状态、压栈、函数调用等实际操作，确保了Objective-C的灵活性。</li>
</ol>
<h4 id="建议2-在头文件中尽量减少其他头文件的引用"><a href="#建议2-在头文件中尽量减少其他头文件的引用" class="headerlink" title="建议2: 在头文件中尽量减少其他头文件的引用"></a>建议2: 在头文件中尽量减少其他头文件的引用</h4><p>头文件用于描述类的声明和可公开部分，而源文件用于描述类的方法或函数的具体实现，这也体现来面向对象语言的“封闭性”和“高内聚低耦合”的特性。<br>避免“类循环依赖”，降低类与类之间的耦合度。</p>
<ol>
<li>在头文件(.h)中，关键字”@class”，只是为了在头文件中引用这个类，把这个类作为一个类型来用，这就要求引用的头文件(.h)名与类的名称一致。</li>
<li>在头文件(.h)中使用”@class”，在源文件(.m)中使用”#import”，不但可以减少不必要的编译时间，降低类之间的耦合度，而且还可以避免循环引用。</li>
<li>在设计类时，尽量多采用协议，避免#import过多，引进不必要的部分。</li>
<li>如果头文件(.h)中有多个类的定义，尽量采用模块方式，只针对性引进所需的类。</li>
</ol>
<h4 id="建议3-尽量使用const、enum来替换预处理-define"><a href="#建议3-尽量使用const、enum来替换预处理-define" class="headerlink" title="建议3: 尽量使用const、enum来替换预处理#define"></a>建议3: 尽量使用const、enum来替换预处理#define</h4><ol>
<li>尽量避免使用#define预处理命令。#define预处理命令不包含任何的类型信息，仅仅是在编译前做替换操作。它们在重复定义时不会发出警告，容易在整个程序中产生不一致的值。</li>
<li>在源文件(.m)中定义的static const类型常量因为无须全局引用，所以它们的名字不需要包含命名空间。</li>
<li>在头文件(.h)中定义的全局引用的常量，需要关联定义在源文件(.m)中的部分。引文需要被全局引用，所以它们的名字需要包含命名空间，通常是用它们的类名作为命名前缀。</li>
<li>尽量用NS_ENUM和NS_OPTIONS宏来实现枚举。</li>
</ol>
<h4 id="建议4-优先使用对象字面量语法而非等效方法"><a href="#建议4-优先使用对象字面量语法而非等效方法" class="headerlink" title="建议4: 优先使用对象字面量语法而非等效方法"></a>建议4: 优先使用对象字面量语法而非等效方法</h4><ol>
<li>尽量使用对象字面量语法来创建字符串、数字、数组和字典等，使用它比使用以前的常规对象创建方法语法更为精简，同时可以避免一些常见的陷阱。</li>
<li>对象字面量语法特性是完全向下兼容，使用新特性编写出来的代码，经过编译后形成的二进制程序可以运行在之前发布的任何OS中。</li>
<li>在数字和字典中，要使用关键字和索引做下标来获取数据。</li>
<li>使用对象字面量语法时，容器类的不可是nil，否则运行时将会抛出异常。</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">NSNumber *number = @1;</span><br><span class="line">NSArray *array = @[@&quot;one&quot;, @&quot;two&quot;];</span><br><span class="line">NSDictionary *dict = @&#123;@&quot;key1&quot;:@&quot;value1&quot;, @&quot;key2&quot;:@&quot;value2&quot;&#125;;</span><br></pre></td></tr></table></figure>
<h4 id="建议5-处理隐藏的返回类型，优先选择实例类型而非id"><a href="#建议5-处理隐藏的返回类型，优先选择实例类型而非id" class="headerlink" title="建议5: 处理隐藏的返回类型，优先选择实例类型而非id"></a>建议5: 处理隐藏的返回类型，优先选择实例类型而非id</h4><p>实例类型(Instancetype)是Objective-C语言中新添加的一个返回类型，可以大大改善Objective-C代码的类型安全。</p>
<ol>
<li><p>instancetype仅仅用来作为Objective-C方法的返回类型。</p>
</li>
<li><p>使用instancetype可避免隐式转换id而造成的欺骗性编译无误通过的现象，防止程序正式运行时出现崩溃现象，可以大大改善Objective-C代码的类型安全。</p>
</li>
<li><p>在某一个特定区域，instancetype可以替代id，并非所有区域都可以替代id。</p>
</li>
</ol>
<h4 id="建议6-尽量使用模块方式与多类建立复合关系"><a href="#建议6-尽量使用模块方式与多类建立复合关系" class="headerlink" title="建议6: 尽量使用模块方式与多类建立复合关系"></a>建议6: 尽量使用模块方式与多类建立复合关系</h4><ol>
<li><p>文件编译问题的存在性——编译时间过长。</p>
</li>
<li><p>预编译头文件(Pre-compiled Headers)处理方式——不实用。</p>
</li>
<li><p>利用模块(Modules)来解决历史问题——事半功倍。</p>
</li>
</ol>
<p>用@import代替#import: @import UIKit;<br>只导入框架中自己需要的部分：@import UIKit.View;</p>
<h4 id="建议7-明解Objective-C-中的有所为而有所不为"><a href="#建议7-明解Objective-C-中的有所为而有所不为" class="headerlink" title="建议7: 明解Objective-C++中的有所为而有所不为"></a>建议7: 明解Objective-C++中的有所为而有所不为</h4><ol>
<li><p>C++和Objective-C在定义结构上一样，但是后者的继承是封闭的。</p>
</li>
<li><p>Objective-C接口中定义的C++类是全局范围的，而不是Objective-C类的内嵌类。</p>
</li>
<li><p>C++和Objective-C的对象模型不能直接兼容。与Objective-C不同的是，C++对象是静态类型的，有运行时系统多态是特殊情况。</p>
</li>
<li><p>C++和Objective-C有词汇歧义和冲突。</p>
</li>
<li><p>C++和Objective-C两者功能上有限制。Objective C++没有为Objective-C类增加C++的功能，也没有为C++类增加Objective-C的功能。</p>
</li>
</ol>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Objective-C/">Objective-C</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
  
    <nav id="page-nav">
      <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/">Next &raquo;</a>
    </nav>
  
</div>
      <footer id="footer">
    <div class="outer">
        <div id="footer-info">
            <div class="footer-left">
                <i class="fa fa-copyright"></i> 
                2016-2018 morven
            </div>
            <div class="footer-right">
                <a href="http://hexo.io/" target="_blank" title="快速、简洁且高效的博客框架">Hexo</a>  Theme <a href="https://github.com/MOxFIVE/hexo-theme-yelee" target="_blank" title="简而不减 Hexo 双栏博客主题  v3.5">Yelee</a> by MOxFIVE <i class="fa fa-heart animated infinite pulse"></i>
            </div>
        </div>
        
            <div class="visit">
                
                    <span id="busuanzi_container_site_pv" style='display:none'>
                        <span id="site-visit" title="本站到访数"><i class="fa fa-user" aria-hidden="true"></i><span id="busuanzi_value_site_uv"></span>
                        </span>
                    </span>
                
                
                    <span>| </span>
                
                
                    <span id="busuanzi_container_page_pv" style='display:none'>
                        <span id="page-visit"  title="本页阅读量"><i class="fa fa-eye animated infinite pulse" aria-hidden="true"></i><span id="busuanzi_value_page_pv"></span>
                        </span>
                    </span>
                
            </div>
        
    </div>
</footer>
    </div>
    
<script data-main="/js/main.js" src="//cdn.bootcss.com/require.js/2.2.0/require.min.js"></script>

    <script>
        $(document).ready(function() {
            var iPad = window.navigator.userAgent.indexOf('iPad');
            if (iPad > -1 || $(".left-col").css("display") === "none") {
                var bgColorList = ["#9db3f4", "#414141", "#e5a859", "#f5dfc6", "#c084a0", "#847e72", "#cd8390", "#996731"];
                var bgColor = Math.ceil(Math.random() * (bgColorList.length - 1));
                $("body").css({"background-color": bgColorList[bgColor], "background-size": "cover"});
            }
            else {
                var backgroundnum = 6;
                var backgroundimg = "url(/background/bg-x.jpg)".replace(/x/gi, Math.ceil(Math.random() * backgroundnum));
                $("body").css({"background": backgroundimg, "background-attachment": "fixed", "background-size": "cover"});
            }
        })
    </script>





    <script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script src="//cdn.bootcss.com/mathjax/2.6.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


<div class="scroll" id="scroll">
    <a href="#" title="返回顶部"><i class="fa fa-arrow-up"></i></a>
    <a href="#comments" onclick="load$hide();" title="查看评论"><i class="fa fa-comments-o"></i></a>
    <a href="#footer" title="转到底部"><i class="fa fa-arrow-down"></i></a>
</div>
<script>
    // Open in New Window
    
        var oOpenInNew = {
            
            
            
            
            
            
             archives: ".archive-article-title", 
             miniArchives: "a.post-list-link", 
            
             friends: "#js-friends a", 
             socail: ".social a" 
        }
        for (var x in oOpenInNew) {
            $(oOpenInNew[x]).attr("target", "_blank");
        }
    
</script>

<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>
  </div><!-- hexo-inject:begin --><!-- Begin: Injected MathJax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config("");
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>

<script type="text/javascript" src="">
</script>
<!-- End: Injected MathJax -->
<!-- hexo-inject:end -->
</body>
</html>